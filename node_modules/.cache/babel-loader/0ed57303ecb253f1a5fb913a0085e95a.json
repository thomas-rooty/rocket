{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\artho\\\\Desktop\\\\COURS IPSSI\\\\Fondamentaux Web, GIT\\\\5\\\\rocket\\\\src\\\\Components\\\\MusicPlayer\\\\MusicPlayer.js\";\nimport React, { Component } from 'react';\nimport './MusicPlayer.css'; //icons\n\nimport VolumeUp from \"../icons/VolumeUppIcon.svg\";\nimport VolumeOffIcon from \"../icons/VolumeDownIcon.svg\";\nimport VolumeDown from \"../icons/VolumeOffIcon.svg\";\nimport ReplayIcon from \"../icons/loop.svg\";\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow';\nimport SkipNextIcon from \"../icons/next.svg\";\nimport SkipPreviousIcon from \"../icons/previous.svg\";\nimport PlayIcon from \"../icons/play.svg\";\nimport PauseIcon from \"../icons/pause.svg\";\nimport BlankIcon from '../icons/blank.png';\nimport Logo from \"../icons/1F680.svg\";\nimport LoopIcon from '@mui/icons-material/Loop';\nimport FavoriteBorderIcon from '@mui/icons-material/FavoriteBorder';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport LinearProgress from '@mui/material/LinearProgress';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport SliderMui from '../slider/Slider';\nimport Stack from '@mui/material/Stack';\nimport Slider from '@mui/material/Slider';\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\nimport AccountCircleIcon from '@mui/icons-material/AccountCircle'; // api\n\nimport getMusic from '../../api/getMusic';\nimport searchSongs from '../../api/searchSongs';\nimport getFavUser from '../../api/getFavUser';\nimport addFavUser from '../../api/addFavUser';\nimport deleteFavUser from '../../api/deleteFavUser';\nimport { TOKEN_KEY, logout } from \"../../utils\";\nimport { withRouter } from 'react-router-dom'; // DEV\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction secondsToHms(seconds) {\n  if (!seconds) return '00:00';\n  let duration = seconds;\n  let hours = duration / 3600;\n  duration = duration % 3600;\n  let min = parseInt(duration / 60);\n  duration = duration % 60;\n  let sec = parseInt(duration);\n\n  if (sec < 10) {\n    sec = `0${sec}`;\n  }\n\n  if (min < 10) {\n    min = `0${min}`;\n  }\n\n  if (parseInt(hours, 10) > 0) {\n    return `${parseInt(hours, 10)}h ${min}m ${sec}s`;\n  } else if (min == 0) {\n    return `00:${sec}`;\n  } else {\n    return `${min}:${sec}`;\n  }\n}\n\nfunction LinearProgressWithLabel(props) {\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        width: '100%',\n        mr: 1\n      },\n      children: /*#__PURE__*/_jsxDEV(LinearProgress, {\n        variant: \"determinate\",\n        ...props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        minWidth: 35\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        color: \"text.secondary\",\n        children: secondsToHms(props.duration)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n\n_c = LinearProgressWithLabel;\n\nclass MusicPlayer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadedDataMusic: false,\n      play: false,\n      audio: new Audio(),\n      data: [],\n      firstLog: false,\n      reload: false,\n      volume: 100,\n      load: false,\n      currentmp3: '',\n      currentPictures: '',\n      currentMusicId: '',\n      currentAlbum: '',\n      currentAuteur: '',\n      currentGenre: '',\n      currentTitre: '',\n      currentDuration: 0,\n      currentPlayed: 0,\n      currentMusicIndex: 0,\n      currentSongEnd: false,\n      currentFavorite: false\n    };\n    this.myRef = /*#__PURE__*/React.createRef();\n    this.killAudio = this.killAudio.bind(this);\n    this.UpIndex = this.UpIndex.bind(this);\n    this.DownIndex = this.DownIndex.bind(this);\n    this.loop = this.loop.bind(this);\n    this.PlayMusic = this.PlayMusic.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.TrackChangeMusic = this.TrackChangeMusic.bind(this);\n    this.searchTracks = this.searchTracks.bind(this);\n    this.GetFavMusicUser = this.GetFavMusicUser.bind(this);\n    this.addFav = this.addFav.bind(this);\n    this.deleteFav = this.deleteFav.bind(this);\n    this.returnListMusic = this.returnListMusic.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      audio: new Audio()\n    });\n    getMusic().then(result => {\n      this.setState({\n        data: result\n      });\n    }).then(getFavUser(localStorage.getItem(TOKEN_KEY)).then(fav => {\n      fav.map(rowfav => {\n        this.state.data.map(x => {\n          if (x['favorite'] === false || x['favorite'] === undefined) {\n            if (x['MusicID'] === rowfav['MusicID']) {\n              x['favorite'] = true;\n            } else {\n              x['favorite'] = false;\n            }\n          }\n        });\n      });\n      this.setState({\n        firstLog: true,\n        currentmp3: this.state.data[this.state.currentMusicIndex]['mp3'],\n        currentPictures: this.state.data[this.state.currentMusicIndex]['Pictures'],\n        currentMusicId: this.state.data[this.state.currentMusicIndex]['MusicID'],\n        currentAlbum: this.state.data[this.state.currentMusicIndex]['Album'],\n        currentAuteur: this.state.data[this.state.currentMusicIndex]['Auteur'],\n        currentGenre: this.state.data[this.state.currentMusicIndex]['Genre'],\n        currentTitre: this.state.data[this.state.currentMusicIndex]['Titre'],\n        currentFavorite: this.state.data[this.state.currentMusicIndex]['favorite'],\n        currentSongEnd: false,\n        audio: new Audio(this.state.data[this.state.currentMusicIndex]['mp3']),\n        currentLoop: false\n      }, () => {\n        this.state.audio.addEventListener('loadedmetadata', e => {\n          this.setState({\n            currentDuration: e.target.duration\n          });\n        });\n        this.state.audio.addEventListener('ended', e => {\n          this.detectChangeMusic(this.state.currentMusicIndex);\n        });\n      });\n    }));\n  }\n\n  searchTracks(e) {\n    if (e.target.value == '') {\n      this.state.audio.pause();\n      getMusic().then(result => {\n        this.setState({\n          firstLog: true,\n          data: result\n        });\n      }).then(getFavUser(localStorage.getItem(TOKEN_KEY)).then(fav => {\n        fav.map(rowfav => {\n          this.state.data.map(x => {\n            if (x['favorite'] === false || x['favorite'] === undefined) {\n              if (x['MusicID'] === rowfav['MusicID']) {\n                x['favorite'] = true;\n              } else {\n                x['favorite'] = false;\n              }\n            }\n          });\n        });\n      }));\n    } else {\n      searchSongs(e.target.value).then(songs => {\n        this.setState({\n          data: songs\n        });\n      }).then(getFavUser(localStorage.getItem(TOKEN_KEY)).then(fav => {\n        fav.map(rowfav => {\n          this.state.data.map(x => {\n            if (x['favorite'] === false || x['favorite'] === undefined) {\n              if (x['MusicID'] === rowfav['MusicID']) {\n                x['favorite'] = true;\n              } else {\n                x['favorite'] = false;\n              }\n            }\n          });\n        });\n      }));\n    }\n  }\n\n  TrackChangeMusic(x) {\n    this.killAudio(x);\n    this.setState({\n      currentmp3: this.state.data[x]['mp3'],\n      currentPictures: this.state.data[x]['Pictures'],\n      currentMusicId: this.state.data[x]['MusicID'],\n      currentAlbum: this.state.data[x]['Album'],\n      currentAuteur: this.state.data[x]['Auteur'],\n      currentFavorite: this.state.data[x]['favorite'],\n      currentGenre: this.state.data[x]['Genre'],\n      currentTitre: this.state.data[x]['Titre'],\n      audio: new Audio(this.state.data[x]['mp3']),\n      currentLoop: false\n    }, () => {\n      this.state.audio.play();\n      this.state.audio.addEventListener('loadedmetadata', e => {\n        this.setState({\n          currentDuration: e.target.duration\n        });\n      });\n      this.state.audio.addEventListener('ended', e => {\n        this.detectChangeMusic(this.state.currentMusicIndex);\n      });\n    });\n  }\n\n  killAudio(x) {\n    this.state.audio.pause();\n    this.setState({\n      play: true,\n      currentMusicIndex: x\n    });\n  } //FAV\n\n\n  GetFavMusicUser() {\n    document.getElementById('checkbox').checked = false;\n    getFavUser(localStorage.getItem(TOKEN_KEY)).then(result => {\n      result.map(x => {\n        x['favorite'] = true;\n      });\n      this.setState({\n        data: result\n      });\n    });\n  }\n\n  addFav(musicID, token) {\n    addFavUser(token, musicID).then(x => {\n      this.state.data.map(row => {\n        if (row['MusicID'] === musicID) {\n          row['favorite'] = true;\n          this.setState({\n            reload: true\n          }, () => {\n            this.setState({\n              reload: false\n            });\n          });\n        }\n      });\n\n      if (musicID === this.state.currentMusicId) {\n        this.setState({\n          currentFavorite: true\n        });\n      }\n    });\n  }\n\n  deleteFav(musicID, token) {\n    deleteFavUser(token, musicID).then(x => {\n      this.state.data.map(row => {\n        if (row['MusicID'] === musicID) {\n          row['favorite'] = false;\n          this.setState({\n            reload: true\n          }, () => {\n            this.setState({\n              reload: false\n            });\n          });\n        }\n      });\n\n      if (musicID === this.state.currentMusicId) {\n        this.setState({\n          currentFavorite: false\n        });\n      }\n    });\n  }\n\n  returnListMusic() {\n    document.getElementById('checkbox').checked = false;\n    getMusic().then(result => {\n      this.setState({\n        data: result\n      });\n    }).then(getFavUser(localStorage.getItem(TOKEN_KEY)).then(fav => {\n      fav.map(rowfav => {\n        this.state.data.map(x => {\n          if (x['favorite'] === false || x['favorite'] === undefined) {\n            if (x['MusicID'] === rowfav['MusicID']) {\n              x['favorite'] = true;\n            } else {\n              x['favorite'] = false;\n            }\n          }\n        });\n        this.setState({\n          data: this.state.data\n        });\n      });\n    }));\n  }\n\n  detectChangeMusic(x) {\n    if (x + 1 < this.state.data.length) {\n      this.state.audio.pause();\n      this.setState({\n        play: true,\n        currentMusicIndex: x + 1,\n        currentmp3: this.state.data[x + 1]['mp3'],\n        currentPictures: this.state.data[x + 1]['Pictures'],\n        currentMusicId: this.state.data[x + 1]['MusicID'],\n        currentAlbum: this.state.data[x + 1]['Album'],\n        currentAuteur: this.state.data[x + 1]['Auteur'],\n        currentGenre: this.state.data[x + 1]['Genre'],\n        currentTitre: this.state.data[x + 1]['Titre'],\n        currentFavorite: this.state.data[[x + 1]]['favorite'],\n        audio: new Audio(this.state.data[x + 1]['mp3']),\n        currentSongEnd: false,\n        currentLoop: false,\n        load: true\n      }, () => {\n        this.state.audio.play();\n        this.state.audio.addEventListener('loadedmetadata', e => {\n          this.setState({\n            currentDuration: e.target.duration,\n            load: false\n          });\n        });\n        this.state.audio.addEventListener('ended', e => {\n          this.detectChangeMusic(this.state.currentMusicIndex);\n        });\n      });\n    } else {\n      this.setState({\n        play: false\n      });\n      this.state.audio.pause();\n    }\n  }\n\n  UpIndex() {\n    let x = this.state.currentMusicIndex + 1;\n\n    if (x < this.state.data.length) {\n      this.killAudio(x);\n      this.setState({\n        currentMusicId: this.state.data[x]['MusicId'],\n        currentmp3: this.state.data[x]['mp3'],\n        currentPictures: this.state.data[x]['Pictures'],\n        currentMusicId: this.state.data[x]['MusicID'],\n        currentAlbum: this.state.data[x]['Album'],\n        currentAuteur: this.state.data[x]['Auteur'],\n        currentGenre: this.state.data[x]['Genre'],\n        currentFavorite: this.state.data[x]['favorite'],\n        currentTitre: this.state.data[x]['Titre'],\n        audio: new Audio(this.state.data[x]['mp3']),\n        currentSongEnd: false,\n        currentLoop: false\n      }, () => {\n        this.state.audio.play();\n        this.state.audio.addEventListener('loadedmetadata', e => {\n          this.setState({\n            currentDuration: e.target.duration\n          });\n        });\n        this.state.audio.addEventListener('ended', e => {\n          this.detectChangeMusic(this.state.currentMusicIndex);\n        });\n      });\n    }\n  }\n\n  DownIndex() {\n    let x = this.state.currentMusicIndex - 1;\n\n    if (x >= 0) {\n      this.killAudio(x);\n      this.setState({\n        currentMusicId: this.state.data[x]['MusicId'],\n        currentmp3: this.state.data[x]['mp3'],\n        currentPictures: this.state.data[x]['Pictures'],\n        currentMusicId: this.state.data[x]['MusicID'],\n        currentAlbum: this.state.data[x]['Album'],\n        currentAuteur: this.state.data[x]['Auteur'],\n        currentGenre: this.state.data[x]['Genre'],\n        currentTitre: this.state.data[x]['Titre'],\n        currentFavorite: this.state.data[x]['favorite'],\n        audio: new Audio(this.state.data[x]['mp3']),\n        currentSongEnd: false,\n        currentLoop: false\n      }, () => {\n        this.state.audio.play();\n        this.state.audio.addEventListener('loadedmetadata', e => {\n          this.setState({\n            currentDuration: e.target.duration\n          });\n        });\n        this.state.audio.addEventListener('ended', e => {\n          this.detectChangeMusic(this.state.currentMusicIndex);\n        });\n      });\n    }\n  }\n\n  loop() {\n    this.setState({\n      currentLoop: this.state.currentLoop ? false : true\n    }, () => {\n      this.state.audio.loop = this.state.currentLoop;\n    });\n  }\n\n  PlayMusic(state) {\n    if (state === 'play') {\n      this.state.audio.play();\n      this.setState({\n        play: true\n      });\n    } else if (state === 'pause') {\n      this.state.audio.pause();\n      this.setState({\n        play: false\n      });\n    }\n  }\n\n  handleChange(e) {\n    this.setState({\n      volume: e.target.value\n    });\n  }\n\n  onChange(e) {\n    var x = this.state.currentDuration / 100 * e.target.value;\n\n    if (x >= this.state.currentDuration) {\n      this.state.audio.pause();\n      this.setState({\n        play: true,\n        currentMusicIndex: x + 1,\n        currentMusicId: this.state.data[this.state.currentIndex]['MusicId'],\n        currentmp3: this.state.data[this.state.currentIndex]['mp3'],\n        currentPictures: this.state.data[this.state.currentIndex]['Pictures'],\n        currentMusicId: this.state.data[this.state.currentIndex]['PMusicId'],\n        currentAlbum: this.state.data[this.state.currentIndex]['Album'],\n        currentAuteur: this.state.data[this.state.currentIndex]['Auteur'],\n        currentGenre: this.state.data[this.state.currentIndex]['Genre'],\n        currentTitre: this.state.data[this.state.currentIndex]['Titre'],\n        audio: new Audio(this.state.data[this.state.currentIndex]['mp3']),\n        currentSongEnd: false,\n        currentLoop: false,\n        load: true\n      }, () => {\n        this.state.audio.play();\n        this.state.audio.addEventListener('loadedmetadata', e => {\n          this.setState({\n            currentDuration: e.target.duration,\n            load: false\n          });\n        });\n        this.state.audio.addEventListener('loadedmetadata', e => {\n          this.setState({\n            currentSongEnd: true\n          });\n        });\n      });\n    } else {\n      this.state.audio.currentTime = x;\n      this.setState({\n        currentPlayed: x\n      });\n    }\n  }\n\n  render() {\n    setTimeout(() => {\n      if (this.state.play) {\n        this.setState({\n          currentPlayed: this.state.audio.currentTime\n        });\n      }\n    }, 1000);\n    this.state.audio.volume = this.state.volume / 100;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Body\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Navbar\",\n        children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n          role: \"navigation\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"menuToggle\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              id: \"checkbox\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 556,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              id: \"menu\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                onClick: this.returnListMusic,\n                children: /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Liste des musiques\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 563,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 561,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                onClick: this.GetFavMusicUser,\n                children: /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Favoris\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 566,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 564,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                onClick: () => {\n                  logout();\n                  this.props.history.push('/');\n                },\n                children: /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Deconnexion\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 572,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 567,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 560,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: Logo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"search\",\n          id: \"searchNavbar\",\n          onChange: this.searchTracks\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"musicInfos\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"picturesPlayer\",\n            style: {\n              backgroundImage: `url(${this.state.currentPictures})`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 581,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nameSong\",\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: this.state.currentTitre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"expendInfoSong\",\n            children: /*#__PURE__*/_jsxDEV(ExpandLessIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ContentPlayer\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"indicatorPlayer\",\n            children: [this.state.currentLoop ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: ReplayIcon,\n              onClick: this.loop\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 602,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(LoopIcon, {\n              sx: {\n                fontSize: 50,\n                color: \"white\"\n              },\n              onClick: this.loop\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 603,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: SkipPreviousIcon,\n              onClick: this.DownIndex,\n              style: {\n                color: this.state.currentMusicIndex - 1 < 0 && '#F8F8F8'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 15\n            }, this), !this.state.play ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: PlayIcon,\n              onClick: () => {\n                this.PlayMusic('play');\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 612,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: PauseIcon,\n              onClick: () => {\n                this.PlayMusic('pause');\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: SkipNextIcon,\n              onClick: this.UpIndex,\n              style: {\n                color: this.state.currentMusicIndex + 1 > this.state.data.length - 1 && '#F8F8F8'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 615,\n              columnNumber: 15\n            }, this), !this.state.currentFavorite ? /*#__PURE__*/_jsxDEV(FavoriteBorderIcon, {\n              onClick: () => {\n                this.addFav(this.state.currentMusicId, localStorage.getItem(TOKEN_KEY));\n              },\n              sx: {\n                fontSize: 50,\n                color: \"white\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 621,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n              onClick: () => {\n                this.deleteFav(this.state.currentMusicId, localStorage.getItem(TOKEN_KEY));\n              },\n              sx: {\n                fontSize: 50,\n                color: \"white\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 622,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ProgressBarPlayer\",\n            style: {\n              width: \"50%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"currentTimeProgressBar\",\n              children: secondsToHms(this.state.currentPlayed)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 628,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SliderMui, {\n              percentage: this.state.firstLog && this.state.currentPlayed / this.state.currentDuration * 100,\n              onChange: this.onChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"timerProgressBar\",\n              children: secondsToHms(this.state.currentDuration - this.state.currentPlayed)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 634,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 627,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"volumeSlider\",\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: '100%'\n            },\n            children: /*#__PURE__*/_jsxDEV(Stack, {\n              spacing: 2,\n              direction: \"row\",\n              sx: {\n                mb: 1\n              },\n              alignItems: \"center\",\n              children: [this.state.volume > 0 ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: VolumeOffIcon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 647,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                src: VolumeDown\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Slider, {\n                \"aria-label\": \"Volume\",\n                value: this.state.volume,\n                onChange: this.handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 651,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: VolumeUp\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 652,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 644,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 642,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ListOfTracks\",\n        children: this.state.data.length > 0 && this.state.data.map((row, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Tracks\",\n            style: {\n              cursor: 'pointer'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"AuteurPlusImgPlustitre\",\n              onClick: () => {\n                this.TrackChangeMusic(index);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ImgPlusTitreTracks\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: row.Pictures\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 666,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                  className: \"titreTest\",\n                  children: row.Titre\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 667,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 665,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"AuteurTracks\",\n                children: row.Auteur\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 669,\n                columnNumber: 21\n              }, this)]\n            }, row.MusicID, true, {\n              fileName: _jsxFileName,\n              lineNumber: 664,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"CoeurAuMillieu\",\n              children: !row['favorite'] ? /*#__PURE__*/_jsxDEV(FavoriteBorderIcon, {\n                onClick: () => {\n                  this.addFav(row.MusicID, localStorage.getItem(TOKEN_KEY));\n                },\n                color: \"white\",\n                sx: {\n                  fontSize: 50,\n                  color: 'white'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 27\n              }, this) : /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n                onClick: () => {\n                  this.deleteFav(row.MusicID, localStorage.getItem(TOKEN_KEY));\n                },\n                color: \"white\",\n                sx: {\n                  fontSize: 50,\n                  color: 'white'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 675,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 671,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 663,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 552,\n      columnNumber: 7\n    }, this);\n  }\n\n} //  MusicPlayer(){\n//\n// }\n\n\nexport default MusicPlayer;\n\nvar _c;\n\n$RefreshReg$(_c, \"LinearProgressWithLabel\");","map":{"version":3,"sources":["C:/Users/artho/Desktop/COURS IPSSI/Fondamentaux Web, GIT/5/rocket/src/Components/MusicPlayer/MusicPlayer.js"],"names":["React","Component","PlayArrowIcon","BlankIcon","LoopIcon","FavoriteBorderIcon","FavoriteIcon","LinearProgress","Typography","Box","SliderMui","Stack","Slider","ExpandLessIcon","AccountCircleIcon","getMusic","searchSongs","getFavUser","addFavUser","deleteFavUser","TOKEN_KEY","logout","withRouter","secondsToHms","seconds","duration","hours","min","parseInt","sec","LinearProgressWithLabel","props","display","alignItems","width","mr","minWidth","MusicPlayer","constructor","state","loadedDataMusic","play","audio","Audio","data","firstLog","reload","volume","load","currentmp3","currentPictures","currentMusicId","currentAlbum","currentAuteur","currentGenre","currentTitre","currentDuration","currentPlayed","currentMusicIndex","currentSongEnd","currentFavorite","myRef","createRef","killAudio","bind","UpIndex","DownIndex","loop","PlayMusic","onChange","handleChange","TrackChangeMusic","searchTracks","GetFavMusicUser","addFav","deleteFav","returnListMusic","componentDidMount","setState","then","result","localStorage","getItem","fav","map","rowfav","x","undefined","currentLoop","addEventListener","e","target","detectChangeMusic","value","pause","songs","document","getElementById","checked","musicID","token","row","length","currentIndex","currentTime","render","setTimeout","history","push","Logo","backgroundImage","ReplayIcon","fontSize","color","SkipPreviousIcon","PlayIcon","PauseIcon","SkipNextIcon","mb","VolumeOffIcon","VolumeDown","VolumeUp","index","cursor","Pictures","Titre","Auteur","MusicID"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './MusicPlayer.css';\r\n\r\n//icons\r\nimport VolumeUp from '../icons/VolumeUppIcon.svg';\r\nimport VolumeOffIcon from '../icons/VolumeDownIcon.svg';\r\nimport VolumeDown from '../icons/VolumeOffIcon.svg';\r\nimport ReplayIcon from '../icons/loop.svg';\r\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow';\r\nimport SkipNextIcon from '../icons/next.svg';\r\nimport SkipPreviousIcon from '../icons/previous.svg';\r\nimport PlayIcon from '../icons/play.svg';\r\nimport PauseIcon from '../icons/pause.svg';\r\nimport BlankIcon from '../icons/blank.png';\r\nimport Logo from '../icons/1F680.svg';\r\n\r\n\r\nimport LoopIcon from '@mui/icons-material/Loop';\r\nimport FavoriteBorderIcon from '@mui/icons-material/FavoriteBorder';\r\nimport FavoriteIcon from '@mui/icons-material/Favorite';\r\n\r\n\r\n\r\nimport LinearProgress from '@mui/material/LinearProgress';\r\nimport Typography from '@mui/material/Typography';\r\nimport Box from '@mui/material/Box';\r\nimport SliderMui from '../slider/Slider';\r\nimport Stack from '@mui/material/Stack';\r\nimport Slider from '@mui/material/Slider';\r\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\r\nimport AccountCircleIcon from '@mui/icons-material/AccountCircle';\r\n\r\n// api\r\nimport getMusic from '../../api/getMusic';\r\nimport searchSongs from '../../api/searchSongs';\r\nimport getFavUser from '../../api/getFavUser';\r\nimport addFavUser from '../../api/addFavUser';\r\nimport deleteFavUser from '../../api/deleteFavUser';\r\n\r\n\r\nimport { TOKEN_KEY, logout } from \"../../utils\";\r\n\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n// DEV\r\nfunction secondsToHms(seconds) {\r\n  if (!seconds) return '00:00'\r\n\r\n  let duration = seconds\r\n  let hours = duration / 3600\r\n  duration = duration % 3600\r\n\r\n  let min = parseInt(duration / 60)\r\n  duration = duration % 60\r\n\r\n  let sec = parseInt(duration)\r\n\r\n  if (sec < 10) {\r\n    sec = `0${sec}`\r\n  }\r\n  if (min < 10) {\r\n    min = `0${min}`\r\n  }\r\n\r\n  if (parseInt(hours, 10) > 0) {\r\n    return `${parseInt(hours, 10)}h ${min}m ${sec}s`\r\n  } else if (min == 0) {\r\n    return `00:${sec}`\r\n  } else {\r\n    return `${min}:${sec}`\r\n  }\r\n}\r\nfunction LinearProgressWithLabel(props) {\r\n  return (\r\n    <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n      <Box sx={{ width: '100%', mr: 1 }}>\r\n        <LinearProgress variant=\"determinate\" {...props} />\r\n      </Box>\r\n      <Box sx={{ minWidth: 35 }}>\r\n        <Typography variant=\"body2\" color=\"text.secondary\">{secondsToHms(props.duration)}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\nclass MusicPlayer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loadedDataMusic: false,\r\n      play: false,\r\n      audio: new Audio(),\r\n      data: [],\r\n      firstLog: false,\r\n      reload: false,\r\n      volume: 100,\r\n      load : false,\r\n\r\n      currentmp3: '',\r\n      currentPictures: '',\r\n      currentMusicId: '',\r\n      currentAlbum: '',\r\n      currentAuteur: '',\r\n      currentGenre: '',\r\n      currentTitre: '',\r\n      currentDuration: 0,\r\n      currentPlayed: 0,\r\n      currentMusicIndex: 0,\r\n      currentSongEnd : false,\r\n      currentFavorite : false,\r\n    }\r\n    this.myRef = React.createRef()\r\n    this.killAudio = this.killAudio.bind(this);\r\n    this.UpIndex = this.UpIndex.bind(this);\r\n    this.DownIndex = this.DownIndex.bind(this);\r\n    this.loop = this.loop.bind(this);\r\n    this.PlayMusic = this.PlayMusic.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.TrackChangeMusic = this.TrackChangeMusic.bind(this);\r\n    this.searchTracks = this.searchTracks.bind(this);\r\n    this.GetFavMusicUser = this.GetFavMusicUser.bind(this);\r\n    this.addFav = this.addFav.bind(this);\r\n    this.deleteFav = this.deleteFav.bind(this);\r\n    this.returnListMusic = this.returnListMusic.bind(this);\r\n  }\r\n  componentDidMount() {\r\n    this.setState({\r\n      audio : new Audio()\r\n    })\r\n    getMusic().then(\r\n      result => {\r\n        this.setState({\r\n          data : result\r\n        })\r\n    })\r\n    .then(\r\n      getFavUser(localStorage.getItem(TOKEN_KEY)).then(\r\n        fav => {\r\n          fav.map(\r\n            rowfav => {\r\n              this.state.data.map(\r\n                x => {\r\n                  if (x['favorite'] === false || x['favorite'] === undefined ){\r\n                    if(x['MusicID'] === rowfav['MusicID']){\r\n                      x['favorite'] = true\r\n                    } else {\r\n                      x['favorite'] = false\r\n                    }\r\n                  }\r\n                }\r\n              )\r\n            }\r\n          )\r\n          this.setState({\r\n            firstLog: true,\r\n            currentmp3: this.state.data[this.state.currentMusicIndex]['mp3'],\r\n            currentPictures: this.state.data[this.state.currentMusicIndex]['Pictures'],\r\n            currentMusicId: this.state.data[this.state.currentMusicIndex]['MusicID'],\r\n            currentAlbum: this.state.data[this.state.currentMusicIndex]['Album'],\r\n            currentAuteur: this.state.data[this.state.currentMusicIndex]['Auteur'],\r\n            currentGenre: this.state.data[this.state.currentMusicIndex]['Genre'],\r\n            currentTitre: this.state.data[this.state.currentMusicIndex]['Titre'],\r\n            currentFavorite : this.state.data[this.state.currentMusicIndex]['favorite'],\r\n            currentSongEnd : false,\r\n            audio: new Audio(this.state.data[this.state.currentMusicIndex]['mp3']),\r\n            currentLoop : false,\r\n          }, () => {\r\n            this.state.audio.addEventListener('loadedmetadata', (e) => {\r\n              this.setState({\r\n                currentDuration: e.target.duration\r\n              })\r\n            })\r\n            this.state.audio.addEventListener('ended', (e) => {\r\n              this.detectChangeMusic(this.state.currentMusicIndex)\r\n            })\r\n          })\r\n        }\r\n      )\r\n    )\r\n  }\r\n  searchTracks(e) {\r\n    if (e.target.value == '') {\r\n      this.state.audio.pause()\r\n      getMusic().then(\r\n        result => {\r\n          this.setState({\r\n            firstLog: true,\r\n            data: result,\r\n          })\r\n        }\r\n      )\r\n      .then(\r\n        getFavUser(localStorage.getItem(TOKEN_KEY)).then(\r\n          fav => {\r\n            fav.map(\r\n              rowfav => {\r\n                this.state.data.map(\r\n                  x => {\r\n                    if (x['favorite'] === false || x['favorite'] === undefined ){\r\n                      if(x['MusicID'] === rowfav['MusicID']){\r\n                        x['favorite'] = true\r\n                      } else {\r\n                        x['favorite'] = false\r\n                      }\r\n                    }\r\n                  }\r\n                )\r\n              }\r\n            )\r\n          }\r\n        )\r\n      )\r\n    } else {\r\n      searchSongs(e.target.value).then(\r\n        songs => {\r\n          this.setState({\r\n            data: songs\r\n          })\r\n        }\r\n      )\r\n      .then(\r\n        getFavUser(localStorage.getItem(TOKEN_KEY)).then(\r\n          fav => {\r\n            fav.map(\r\n              rowfav => {\r\n                this.state.data.map(\r\n                  x => {\r\n                    if (x['favorite'] === false || x['favorite'] === undefined ){\r\n                      if(x['MusicID'] === rowfav['MusicID']){\r\n                        x['favorite'] = true\r\n                      } else {\r\n                        x['favorite'] = false\r\n                      }\r\n                    }\r\n                  }\r\n                )\r\n              }\r\n            )\r\n          }\r\n        )\r\n      )\r\n    }\r\n\r\n  }\r\n  TrackChangeMusic(x) {\r\n    this.killAudio(x)\r\n    this.setState({\r\n      currentmp3: this.state.data[x]['mp3'],\r\n      currentPictures: this.state.data[x]['Pictures'],\r\n      currentMusicId: this.state.data[x]['MusicID'],\r\n      currentAlbum: this.state.data[x]['Album'],\r\n      currentAuteur: this.state.data[x]['Auteur'],\r\n      currentFavorite : this.state.data[x]['favorite'],\r\n      currentGenre: this.state.data[x]['Genre'],\r\n      currentTitre: this.state.data[x]['Titre'],\r\n      audio: new Audio(this.state.data[x]['mp3']),\r\n      currentLoop : false,\r\n    }, () => {\r\n      this.state.audio.play()\r\n      this.state.audio.addEventListener('loadedmetadata', (e) => {\r\n        this.setState({\r\n          currentDuration: e.target.duration\r\n        })\r\n      })\r\n      this.state.audio.addEventListener('ended', (e) => {\r\n        this.detectChangeMusic(this.state.currentMusicIndex)\r\n      })\r\n    })\r\n  }\r\n  killAudio(x) {\r\n    this.state.audio.pause()\r\n    this.setState({\r\n      play: true,\r\n      currentMusicIndex: x,\r\n    })\r\n  }\r\n  //FAV\r\n  GetFavMusicUser(){\r\n    document.getElementById('checkbox').checked = false\r\n    getFavUser(localStorage.getItem(TOKEN_KEY)).then(\r\n      result =>\r\n      {\r\n        result.map(x => {\r\n          x['favorite'] = true\r\n        })\r\n        this.setState({\r\n          data : result\r\n        })\r\n      }\r\n    )\r\n  }\r\n  addFav(musicID, token){\r\n    addFavUser(token,musicID)\r\n    .then(\r\n      x => {\r\n        this.state.data.map(\r\n          row => {\r\n            if (row['MusicID'] === musicID){\r\n              row['favorite'] = true\r\n              this.setState({\r\n                reload : true\r\n              }, () =>{\r\n                this.setState({\r\n                  reload : false\r\n                })\r\n              })\r\n            }\r\n          }\r\n        )\r\n        if (musicID === this.state.currentMusicId){\r\n          this.setState({\r\n            currentFavorite : true\r\n          })\r\n        }\r\n      }\r\n    )\r\n\r\n  }\r\n  deleteFav(musicID, token){\r\n    deleteFavUser(token,musicID)\r\n    .then(\r\n      x => {\r\n        this.state.data.map(\r\n          row => {\r\n            if (row['MusicID'] === musicID){\r\n              row['favorite'] = false\r\n              this.setState({\r\n                reload : true\r\n              }, () =>{\r\n                this.setState({\r\n                  reload : false\r\n                })\r\n              })\r\n            }\r\n          }\r\n        )\r\n        if (musicID === this.state.currentMusicId){\r\n          this.setState({\r\n            currentFavorite : false\r\n          })\r\n        }\r\n      }\r\n    )\r\n  }\r\n  returnListMusic(){\r\n    document.getElementById('checkbox').checked = false\r\n    getMusic().then(\r\n      result => {\r\n        this.setState({\r\n          data : result\r\n        })\r\n    })\r\n    .then(\r\n      getFavUser(localStorage.getItem(TOKEN_KEY)).then(\r\n        fav => {\r\n          fav.map(\r\n            rowfav => {\r\n              this.state.data.map(\r\n                x => {\r\n                  if (x['favorite'] === false || x['favorite'] === undefined ){\r\n                    if(x['MusicID'] === rowfav['MusicID']){\r\n                      x['favorite'] = true\r\n                    } else {\r\n                      x['favorite'] = false\r\n                    }\r\n                  }\r\n                }\r\n              )\r\n              this.setState({\r\n                data : this.state.data\r\n              })\r\n            }\r\n          )\r\n        }\r\n      )\r\n    )\r\n  }\r\n\r\n  detectChangeMusic(x){\r\n    if (x+1 < this.state.data.length) {\r\n      this.state.audio.pause()\r\n      this.setState({\r\n        play: true,\r\n        currentMusicIndex: x+1,\r\n        currentmp3: this.state.data[x+1]['mp3'],\r\n        currentPictures: this.state.data[x+1]['Pictures'],\r\n        currentMusicId: this.state.data[x+1]['MusicID'],\r\n        currentAlbum: this.state.data[x+1]['Album'],\r\n        currentAuteur: this.state.data[x+1]['Auteur'],\r\n        currentGenre: this.state.data[x+1]['Genre'],\r\n        currentTitre: this.state.data[x+1]['Titre'],\r\n        currentFavorite : this.state.data[[x+1]]['favorite'],\r\n        audio: new Audio(this.state.data[x+1]['mp3']),\r\n        currentSongEnd : false,\r\n        currentLoop : false,\r\n        load : true\r\n      }, () => {\r\n        this.state.audio.play()\r\n        this.state.audio.addEventListener('loadedmetadata', (e) => {\r\n          this.setState({\r\n            currentDuration: e.target.duration,\r\n            load : false\r\n          })\r\n        })\r\n        this.state.audio.addEventListener('ended', (e) => {\r\n          this.detectChangeMusic(this.state.currentMusicIndex)\r\n        })\r\n      })\r\n    }\r\n    else {\r\n      this.setState({\r\n        play : false\r\n      })\r\n      this.state.audio.pause()\r\n    }\r\n  }\r\n  UpIndex() {\r\n    let x = this.state.currentMusicIndex + 1;\r\n    if (x < this.state.data.length) {\r\n      this.killAudio(x)\r\n      this.setState({\r\n        currentMusicId: this.state.data[x]['MusicId'],\r\n        currentmp3: this.state.data[x]['mp3'],\r\n        currentPictures: this.state.data[x]['Pictures'],\r\n        currentMusicId: this.state.data[x]['MusicID'],\r\n        currentAlbum: this.state.data[x]['Album'],\r\n        currentAuteur: this.state.data[x]['Auteur'],\r\n        currentGenre: this.state.data[x]['Genre'],\r\n        currentFavorite : this.state.data[x]['favorite'],\r\n        currentTitre: this.state.data[x]['Titre'],\r\n        audio: new Audio(this.state.data[x]['mp3']),\r\n        currentSongEnd : false,\r\n        currentLoop : false,\r\n      }, () => {\r\n        this.state.audio.play()\r\n        this.state.audio.addEventListener('loadedmetadata', (e) => {\r\n          this.setState({\r\n            currentDuration: e.target.duration\r\n          })\r\n        })\r\n        this.state.audio.addEventListener('ended', (e) => {\r\n          this.detectChangeMusic(this.state.currentMusicIndex)\r\n        })\r\n      })\r\n    }\r\n  }\r\n  DownIndex() {\r\n    let x = this.state.currentMusicIndex - 1;\r\n    if (x >= 0) {\r\n      this.killAudio(x)\r\n      this.setState({\r\n        currentMusicId: this.state.data[x]['MusicId'],\r\n        currentmp3: this.state.data[x]['mp3'],\r\n        currentPictures: this.state.data[x]['Pictures'],\r\n        currentMusicId: this.state.data[x]['MusicID'],\r\n        currentAlbum: this.state.data[x]['Album'],\r\n        currentAuteur: this.state.data[x]['Auteur'],\r\n        currentGenre: this.state.data[x]['Genre'],\r\n        currentTitre: this.state.data[x]['Titre'],\r\n        currentFavorite : this.state.data[x]['favorite'],\r\n        audio: new Audio(this.state.data[x]['mp3']),\r\n        currentSongEnd : false,\r\n        currentLoop : false,\r\n      }, () => {\r\n        this.state.audio.play()\r\n        this.state.audio.addEventListener('loadedmetadata', (e) => {\r\n          this.setState({\r\n            currentDuration: e.target.duration\r\n          })\r\n        })\r\n        this.state.audio.addEventListener('ended', (e) => {\r\n          this.detectChangeMusic(this.state.currentMusicIndex)\r\n        })\r\n      })\r\n    }\r\n  }\r\n  loop() {\r\n    this.setState({\r\n      currentLoop : this.state.currentLoop ? false : true\r\n    }, () => {\r\n      this.state.audio.loop = this.state.currentLoop\r\n    })\r\n  }\r\n  PlayMusic(state) {\r\n    if (state === 'play') {\r\n      this.state.audio.play();\r\n      this.setState({\r\n        play: true\r\n      })\r\n    } else if (state === 'pause') {\r\n      this.state.audio.pause();\r\n      this.setState({\r\n        play: false\r\n      })\r\n    }\r\n  }\r\n  handleChange(e) {\r\n    this.setState({\r\n      volume: e.target.value,\r\n    })\r\n  }\r\n  onChange(e) {\r\n    var x = (this.state.currentDuration / 100) * e.target.value\r\n    if (x >= this.state.currentDuration){\r\n      this.state.audio.pause()\r\n      this.setState({\r\n        play: true,\r\n        currentMusicIndex: x+1,\r\n        currentMusicId: this.state.data[this.state.currentIndex]['MusicId'],\r\n        currentmp3: this.state.data[this.state.currentIndex]['mp3'],\r\n        currentPictures: this.state.data[this.state.currentIndex]['Pictures'],\r\n        currentMusicId: this.state.data[this.state.currentIndex]['PMusicId'],\r\n        currentAlbum: this.state.data[this.state.currentIndex]['Album'],\r\n        currentAuteur: this.state.data[this.state.currentIndex]['Auteur'],\r\n        currentGenre: this.state.data[this.state.currentIndex]['Genre'],\r\n        currentTitre: this.state.data[this.state.currentIndex]['Titre'],\r\n        audio: new Audio(this.state.data[this.state.currentIndex]['mp3']),\r\n        currentSongEnd : false,\r\n        currentLoop : false,\r\n        load : true\r\n      }, () => {\r\n        this.state.audio.play()\r\n        this.state.audio.addEventListener('loadedmetadata', (e) => {\r\n          this.setState({\r\n            currentDuration: e.target.duration,\r\n            load : false\r\n          })\r\n        })\r\n        this.state.audio.addEventListener('loadedmetadata', (e) => {\r\n          this.setState({\r\n            currentSongEnd : true,\r\n          })\r\n        })\r\n      })\r\n    } else {\r\n      this.state.audio.currentTime = x\r\n      this.setState({\r\n        currentPlayed: x\r\n      })\r\n    }\r\n  }\r\n  render() {\r\n    setTimeout(() => {\r\n      if (this.state.play) {\r\n        this.setState({\r\n          currentPlayed: this.state.audio.currentTime\r\n        })\r\n      }\r\n    }, 1000);\r\n    this.state.audio.volume = this.state.volume / 100\r\n    return (\r\n      <div className=\"Body\">\r\n        <div className=\"Navbar\">\r\n          <nav role=\"navigation\">\r\n            <div id=\"menuToggle\">\r\n              <input type=\"checkbox\" id=\"checkbox\"/>\r\n              <span></span>\r\n              <span></span>\r\n              <span></span>\r\n              <ul id=\"menu\">\r\n                <p onClick={\r\n                    this.returnListMusic\r\n                  }><li>Liste des musiques</li></p>\r\n                <p onClick={\r\n                    this.GetFavMusicUser\r\n                  }><li>Favoris</li></p>\r\n                <p onClick={\r\n                    () => {\r\n                      logout()\r\n                      this.props.history.push('/')\r\n                    }\r\n                }><li>Deconnexion</li></p>\r\n              </ul>\r\n            </div>\r\n          </nav>\r\n          <img src={Logo}/>\r\n          <input type=\"search\" id=\"searchNavbar\"onChange={this.searchTracks} />\r\n        </div>\r\n        <div className=\"player\">\r\n          <div className=\"musicInfos\">\r\n            <div className=\"picturesPlayer\" style={{\r\n              backgroundImage: `url(${this.state.currentPictures})`\r\n            }}>\r\n            </div>\r\n            <div className=\"nameSong\">\r\n              <h5>\r\n                {\r\n                  this.state.currentTitre\r\n                }\r\n              </h5>\r\n            </div>\r\n            <div className=\"expendInfoSong\">\r\n              <ExpandLessIcon/>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"ContentPlayer\">\r\n\r\n            <div className=\"indicatorPlayer\">\r\n              {\r\n                this.state.currentLoop\r\n                ? <img src={ReplayIcon} onClick={this.loop} />\r\n                : <LoopIcon sx={{ fontSize: 50 , color:\"white\"}}onClick={this.loop}/>\r\n              }\r\n              <img src={SkipPreviousIcon}\r\n                onClick={this.DownIndex}\r\n                style={{\r\n                  color: this.state.currentMusicIndex - 1 < 0 && '#F8F8F8'\r\n                }} />\r\n              {\r\n                !this.state.play\r\n                  ? <img src={PlayIcon} onClick={() => { this.PlayMusic('play') }} />\r\n                  : <img src={PauseIcon} onClick={() => { this.PlayMusic('pause') }} />\r\n              }\r\n              <img src={SkipNextIcon} onClick={this.UpIndex}\r\n                style={{\r\n                  color: this.state.currentMusicIndex + 1 > this.state.data.length - 1 && '#F8F8F8'\r\n                }} />\r\n                {\r\n                  !this.state.currentFavorite\r\n                  ? <FavoriteBorderIcon onClick={() => {this.addFav(this.state.currentMusicId, localStorage.getItem(TOKEN_KEY))}} sx={{ fontSize: 50 , color:\"white\"}}/>\r\n                : <FavoriteIcon onClick={ () => {this.deleteFav(this.state.currentMusicId, localStorage.getItem(TOKEN_KEY))}} sx={{ fontSize: 50 , color:\"white\"}}/>\r\n                }\r\n\r\n\r\n            </div>\r\n            <div className=\"ProgressBarPlayer\" style={{ width: \"50%\" }}>\r\n              <div className=\"currentTimeProgressBar\">\r\n                {\r\n                  secondsToHms(this.state.currentPlayed)\r\n                }\r\n              </div>\r\n              <SliderMui percentage={this.state.firstLog && this.state.currentPlayed / this.state.currentDuration * 100} onChange={this.onChange}  />\r\n              <div className=\"timerProgressBar\">\r\n                {\r\n                  secondsToHms(this.state.currentDuration - this.state.currentPlayed)\r\n                }\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n          <div className=\"volumeSlider\">\r\n            <Box sx={{ width: '100%' }}>\r\n              <Stack spacing={2} direction=\"row\" sx={{ mb: 1 }} alignItems=\"center\">\r\n                {\r\n                  this.state.volume > 0\r\n                    ? <img src={VolumeOffIcon} />\r\n                    : <img src={VolumeDown} />\r\n                }\r\n\r\n                <Slider aria-label=\"Volume\" value={this.state.volume} onChange={this.handleChange} />\r\n                <img src={VolumeUp} />\r\n              </Stack>\r\n            </Box>\r\n          </div>\r\n        </div>\r\n        <div className=\"ListOfTracks\">\r\n          {\r\n            this.state.data.length > 0\r\n            && this.state.data.map(\r\n              (row, index) =>\r\n              <div>\r\n                <div className=\"Tracks\" style={{cursor : 'pointer'}}>\r\n                  <div className=\"AuteurPlusImgPlustitre\" key={row.MusicID} onClick={() => { this.TrackChangeMusic(index) }}>\r\n                    <div className=\"ImgPlusTitreTracks\">\r\n                      <img src={row.Pictures} />\r\n                      <h5 className=\"titreTest\">{row.Titre}</h5>\r\n                    </div>\r\n                    <h5 className=\"AuteurTracks\">{row.Auteur}</h5>\r\n                  </div>\r\n                    <div className=\"CoeurAuMillieu\">\r\n                    {\r\n                        !row['favorite']\r\n                        ? <FavoriteBorderIcon onClick={() => {this.addFav(row.MusicID, localStorage.getItem(TOKEN_KEY))}} color='white' sx={{ fontSize: 50, color:'white'}}/>\r\n                      : <FavoriteIcon onClick={ () => {this.deleteFav(row.MusicID, localStorage.getItem(TOKEN_KEY))}} color='white' sx={{ fontSize: 50, color:'white'}}/>\r\n                    }\r\n                    </div>\r\n                </div>\r\n              </div>\r\n\r\n\r\n            )\r\n          }\r\n        </div>\r\n      </div >\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n//  MusicPlayer(){\r\n//\r\n\r\n// }\r\nexport default MusicPlayer;\r\n"]},"metadata":{},"sourceType":"module"}